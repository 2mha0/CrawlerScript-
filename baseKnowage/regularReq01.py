import requestsimport reimport osif __name__ == '__main__':    # 创建文件夹保存图片    if not os.path.exists('../pic'):        os.mkdir('../pic')    header = {        'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36'    }    # ex = '<img\n| .*src="(.*?)"/>'    # 待匹配的正则表达式    ex = '(//[^\s]*?.[pj][np]g)"'    for pageNum in range(1,3):        url = 'https://soso.nipic.com/?g=1&or=0&page=' + str(pageNum)        spn_text = requests.get(url=url, headers=header).text        with open('../html/test.html', 'w', encoding='utf-8') as fp:            fp.write(spn_text)        img_src_list = re.findall(ex, spn_text, re.S)        # 去除列表中的空元素        while '' in img_src_list:            img_src_list.remove('')        # 去除重复元素        # img_src_list = list(set(img_src_list))        # print(img_src_list)        sumPicNum = 0        for src in img_src_list:            sumPicNum += 1            src = 'https:' + src            # 请求图片的二进制数据            img_data = requests.get(url=src, headers=header).content            # 图片名称            img_name = src.split('/')[-1]            # 图片路径            imgPath = './pic/' + img_name            with open(imgPath, 'wb') as fp:                fp.write(img_data)                print(img_name,'下载成功')        print('共下载了: ' + str(sumPicNum) + ' 张图片')